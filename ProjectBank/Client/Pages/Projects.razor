@page "/projects/{Id}"
@inject HttpClient Http
@inject NavigationManager navigationManager

<h1>This is the blazor page for the "@_project?.Title" project</h1>
  
@if (_project == null)
{
    <p><em>Loading...</em></p>
}
else
{
<div class="row my-5">
    <div class="col-lg-6 col-xl-4 offset-lg-3 offset-xl-4">
        <RadzenCard class="m-6">
            <h3 class="h5" style="color:black;">"@_project?.Title":</h3>
            <div class="d-flex flex-row">
                <div>
                    <b style="color:black;">Project description:</b>
                    <div style="color:black;">@(_project?.Description)</div>
                    @if (_project?.ImageUrl != null)
                    {
                        <div><img class="card-img-top" src=@_project.ImageUrl alt="Project image"></div>
                    }
                    <b style="color:black;">Level of difficulty:</b>
                    <div style="color:black;">@(_project?.Degree)</div>
                    <b style="color:black;">ECTS:</b>
                    <div style="color:black;">@(_project?.Ects)</div>
                    <b style="color:black;">Last updated:</b>
                    <div style="color:black;">@(_project?.LastUpdated)</div>
                    <b style="color:black;">Tags:</b>
                    <div style="color:black;">@if (_project != null){foreach (var keyword in _project.Keywords)
                    {
                        <div>@keyword</div>
                    }}
                        <div style="color:blue;">
                            @if (_project?.FileUrl != null)
                            {
                                <a href="@_project.FileUrl" download="@_project.Title??.pdf">@_project.Title .pdf</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </RadzenCard>
        <RadzenCard class="m-5">
            <h3 class="h5" style="color:black;">Author:</h3>
            <div class="d-flex flex-row">
                <div>
                    <div style="color:black;">"Insert role here"</div>
                    <b style="color:black;">@(_project?.AuthorName)</b>
                    <div><b style="color:black;">Upload Image:</b>
                        <ImageUploader Id="_project!.Id" isProject="true"></ImageUploader></div>
                    <b style="color:black;">Upload PDF:</b>
                    <div><PdfUploader projectId="_project.Id"></PdfUploader></div>
                </div>
            </div>
        </RadzenCard>
    </div>
</div>
}

@code {
    [Parameter]
    public string? Id { get; set; }
    private ProjectDetailsDto? _project;

    protected override async Task OnInitializedAsync()
    {
        _project = await Http.GetFromJsonAsync<ProjectDetailsDto>("/api/Project/"+Id);
    }
}